(this.webpackJsonprickcyclopedia=this.webpackJsonprickcyclopedia||[]).push([[0],{31:function(e,a,t){e.exports=t(61)},36:function(e,a,t){},37:function(e,a,t){},61:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(24),s=t.n(c),o=(t(36),t(37),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__logo"},r.a.createElement("a",{className:"header__logo-link",href:"/"},"Rickcyclopedia.")))}),l=t(5),i=function(e){var a=e.id,t=void 0===a?"":a,n=e.label,c=void 0===n?"":n,s=e.isChecked,o=void 0!==s&&s,l=e.onChange,i=void 0===l?void 0:l,u=e._class,d=void 0===u?"":u,p=e.testId,m=void 0===p?"":p;return r.a.createElement("label",{className:"checkbox ".concat(d)},c,r.a.createElement("input",{id:t,type:"checkbox",checked:o,onChange:i,"data-test-id":m}),r.a.createElement("span",{className:"checkmark"}))},u=function(e){var a=e.type,t=e.options,n=e.applyFilters;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"filters__category"},r.a.createElement("div",{className:"filters__name-section"},r.a.createElement("h4",{className:"filters__name"},a)),r.a.createElement("div",{className:"filters__options"},r.a.createElement("ul",{className:"filters__list"},t&&t.map((function(e){return r.a.createElement("li",{key:e.type},r.a.createElement(i,{label:e.type,isChecked:e.isSelected,onChange:function(t){n(a,e.type,t.target.checked)}}))}))))))},d=function(e){var a=e.id,t=void 0===a?"":a,n=e.isIcon,c=void 0!==n&&n,s=e._class,o=void 0===s?"":s,l=e.ariaLabel,i=void 0===l?"":l,u=e.onClick,d=void 0===u?void 0:u,p=e.testId,m=void 0===p?"":p,v=e.children,f=void 0===v?null:v,h=e.type,b=void 0===h?"button":h;return r.a.createElement("button",{type:b,id:t,className:"btn ".concat(c?"btn-icon":""," ").concat(o),"aria-label":i,onClick:d,"data-test-id":m},f)},p=t(2),m={sortOptions:[{value:"id",name:"Sort by ID"},{value:"name",name:"Sort by Name"}],filterCategories:[{type:"status",options:[{type:"Alive",isSelected:!1},{type:"Dead",isSelected:!1},{type:"unknown",isSelected:!1}]},{type:"species",options:[{type:"Human",isSelected:!1},{type:"Alien",isSelected:!1},{type:"Mytholog",isSelected:!1}]},{type:"gender",options:[{type:"Male",isSelected:!1},{type:"Female",isSelected:!1}]},{type:"origin",options:[{type:"unknown",isSelected:!1},{type:"Post-Apocalyptic Earth",isSelected:!1},{type:"Nuptia 4",isSelected:!1}]}]},v=t(25),f=t.n(v),h=t(30),b=t(8),E=t(13),y=t.n(E),g=t(26),_=t.n(g),N=m,k=Object(n.createContext)(N),j=k.Provider,w=null,O=new Set,C=function(e){var a=e.children,t=Object(n.useReducer)((function(e,a){switch(a.type){case"FETCH_DATA":return w=f()(a.payload.results),Object(p.a)(Object(p.a)({},e),{},{data:a.payload});case"SEARCH_CHAR":var t=(l=w,i=a.payload,y()(l,(function(e){return e.name.toLowerCase().includes(i.toLowerCase())})));return Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{results:t})});case"APPLY_FILTER":var n=e.filterCategories;n.forEach((function(e){e.type===a.payload.type&&e.options.forEach((function(e){e.type===a.payload.optionType&&(e.isSelected=a.payload.isChecked,a.payload.isChecked?O.add(a.payload.optionType):O.delete(e.type))}))}));var r=function(e,a,t){var n=[],r=new Map;return t.forEach((function(e){e.options.forEach((function(a){if(a.isSelected)if(r.has(e.type))r.get(e.type).push(a.type);else{var t=[];t.push(a.type),r.set(e.type,t)}else if(r.has(e.type)){var n=r.get(e.type),c=n&&n.indexOf(a.type);-1!==c&&n.splice(c,1)}}))})),r.size&&r.forEach((function(e,t){e.forEach((function(e){var r=Object(b.a)({},t,e),c=y()(a,r);n.push.apply(n,Object(h.a)(c))}))})),n}(e.data.results,w,n);return Object(p.a)(Object(p.a)({},e),{},{filterCategories:n,selectedFilters:O,data:Object(p.a)(Object(p.a)({},e.data),{},{results:r})});case"SORT_DATA":var c=(s=e.data.results,o=a.payload,_()(s,[o.sortParam],[o.sortOrder]));return Object(p.a)(Object(p.a)({},e),{},{data:Object(p.a)(Object(p.a)({},e.data),{},{results:c})});case"CLEAR_DATA":return Object(p.a)(Object(p.a)({},e),{},{data:[]});default:throw new Error}var s,o,l,i}),N),c=Object(l.a)(t,2),s=c[0],o=c[1];return r.a.createElement(j,{value:{state:s,dispatch:o}},a)},A=function(){var e=Object(n.useContext)(k),a=e.state.filterCategories,t=e.dispatch,c=Object(n.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=s[1],p=function(e,a,n){t({type:"APPLY_FILTER",payload:{type:e,optionType:a,isChecked:n}})};return r.a.createElement("div",{className:"filters"},r.a.createElement("div",{className:"filters__title-section"},r.a.createElement("h3",{className:"filters__title"},"Filters"),r.a.createElement(d,{isIcon:!0,_class:"filters__toggle",onClick:function(){i(!o)}},r.a.createElement("i",{className:"fa fa-".concat(o?"minus":"plus")}))),r.a.createElement("div",{className:"filters__section ".concat(o?"expanded":"")},a.map((function(e){return r.a.createElement(u,Object.assign({key:e.type},e,{applyFilters:p}))}))))},S=function(){return r.a.createElement("div",{className:"side-bar"},r.a.createElement("div",{className:"side-bar__content"},r.a.createElement(A,null)))},x=t(27),D=t.n(x),T=function(e){var a=e.label,t=void 0===a?"":a,n=e.onClose,c=void 0===n?void 0:n;return r.a.createElement("div",{className:"chip"},r.a.createElement("span",{className:"chip__label"},t),c&&r.a.createElement("button",{type:"button",className:"chip__closebtn",onClick:c,"aria-label":"close chip"}))},L=function(){var e=Object(n.useContext)(k).state.selectedFilters;return e&&e.size>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"selected-filters"},r.a.createElement("h3",{className:"selected-filters__title"},"Selected filters"),r.a.createElement("div",{className:"selected-filters__chips-section"},Array.from(e).map((function(e){return r.a.createElement(T,{key:e,label:e})}))))):null},R=function(e){var a=e.id,t=void 0===a?"":a,n=e.ariaLabel,c=void 0===n?"":n,s=e.testId,o=void 0===s?"":s,l=e.defaultValue,i=void 0===l?"":l,u=e.onChange,d=void 0===u?void 0:u,p=e.optionsData,m=void 0===p?[]:p,v=e._class,f=void 0===v?"":v;return r.a.createElement("select",{id:t,"aria-label":c,"data-test-id":o,defaultValue:i,onChange:d,className:"select ".concat(f)},m&&m.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.name)})))},F=function(e){var a=e.inputLabel,t=void 0===a?"":a,c=e.btnLabel,s=void 0===c?"":c,o=e.handleSearch,i=void 0===o?void 0:o,u=Object(n.useState)(""),p=Object(l.a)(u,2),m=p[0],v=p[1],f=function(e){i(m.trim()),e.preventDefault()};return r.a.createElement("div",{className:"search-bar"},r.a.createElement("form",{onSubmit:f},r.a.createElement("label",{htmlFor:"search-term",className:"search-bar__title"},t),r.a.createElement("div",{className:"search-bar__input-section"},r.a.createElement("input",{id:"search-term",type:"text",className:"search-bar__input",onChange:function(e){v(e.target.value)}}),r.a.createElement(d,{type:"submit",onClick:f},s))))},P=function(){var e=Object(n.useContext)(k),a=e.state,t=e.dispatch,c=Object(n.useState)("id"),s=Object(l.a)(c,2),o=s[0],i=s[1],u=a.sortOptions,p=function(e){t({type:"SORT_DATA",payload:{sortParam:o,sortOrder:e}})};return r.a.createElement("div",{className:"search-sort"},r.a.createElement(F,{inputLabel:"Search by name",btnLabel:"Search",handleSearch:function(e){t({type:"SEARCH_CHAR",payload:e})}}),r.a.createElement("div",{className:"search-sort__sort-section"},r.a.createElement(R,{_class:"search-sort__sort",optionsData:u,defaultValue:"id",onChange:function(e){i(e.target.value)}}),r.a.createElement("div",{className:"search-sort__cta-section"},r.a.createElement(d,{isIcon:!0,onClick:function(){return p("asc")}},r.a.createElement("i",{className:"fa fa-chevron-up"})),r.a.createElement(d,{isIcon:!0,onClick:function(){return p("desc")}},r.a.createElement("i",{className:"fa fa-chevron-down"})))))},I=function(e){var a=new Date,t=new Date(e);return function(e,a){var t=e-a;return t<6e4?Math.floor(t/1e3)+" seconds ago":t<36e5?Math.floor(t/6e4)+" minutes ago":t<864e5?Math.floor(t/36e5)+" hours ago":t<2592e6?Math.floor(t/864e5)+" days ago":t<31536e6?Math.floor(t/2592e6)+" months ago":Math.floor(t/31536e6)+" years ago"}(a.getTime(),t.getTime())},M=function(e){var a=e.character,t=void 0===a?{}:a,n=t.name,c=void 0===n?"":n,s=t.id,o=void 0===s?"":s,l=t.status,i=void 0===l?"":l,u=t.species,d=void 0===u?"":u,p=t.gender,m=void 0===p?"":p,v=t.origin,f=void 0===v?{}:v,h=t.location,b=void 0===h?{}:h,E=t.image,y=void 0===E?"":E,g=t.created,_=void 0===g?"":g;return r.a.createElement("div",{className:"character-card"},r.a.createElement("div",{className:"character-card__image-section"},r.a.createElement("img",{src:y,alt:c,className:"character-card__image"}),r.a.createElement("div",{className:"character-card__title-wrapper"},r.a.createElement("div",{className:"character-card__title-section"},r.a.createElement("h4",{className:"character-card__title"},c),r.a.createElement("span",{className:"character-card__details"},"id: ".concat(o," - ").concat("Created"," ").concat(I(_)))))),r.a.createElement("div",{className:"character-card__content-section"},r.a.createElement("div",{className:"character-card__desc-item"},r.a.createElement("span",{className:"character-card__desc-type"},"status"),r.a.createElement("span",{className:"character-card__desc-data"},i)),r.a.createElement("div",{className:"character-card__desc-item"},r.a.createElement("span",{className:"character-card__desc-type"},"species"),r.a.createElement("span",{className:"character-card__desc-data"},d)),r.a.createElement("div",{className:"character-card__desc-item"},r.a.createElement("span",{className:"character-card__desc-type"},"gender"),r.a.createElement("span",{className:"character-card__desc-data"},m)),r.a.createElement("div",{className:"character-card__desc-item"},r.a.createElement("span",{className:"character-card__desc-type"},"origin"),r.a.createElement("span",{className:"character-card__desc-data"},f.name)),r.a.createElement("div",{className:"character-card__desc-item"},r.a.createElement("span",{className:"character-card__desc-type"},"last location"),r.a.createElement("span",{className:"character-card__desc-data"},b.name))))},H=function(){var e=Object(n.useContext)(k).state.data;return r.a.createElement("div",{className:"results-section"},e&&e.results.map((function(e){return r.a.createElement(M,{key:"".concat(e.id,"_").concat(e.name),character:e})})))},W=function(e){var a=e.message,t=void 0===a?"":a;return r.a.createElement("div",{className:"no-results"},r.a.createElement("p",{className:"no-results__message"},t))},U=function(e){var a=e.fetchData,t=Object(n.useContext)(k).state.data;return r.a.createElement("div",{className:"content-section"},r.a.createElement(L,null),r.a.createElement(P,null),t&&t.results&&t.results.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(D.a,{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",breakClassName:"break-me",pageCount:t.info.pages||0,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:function(e){var t="".concat("?page=").concat(e.selected+1);a(t)},containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"})):r.a.createElement(W,{message:"No results found!"}))},G=t(1),K=t.n(G),V=t(4),q=t(9),B=t.n(q),z=B.a.create({baseURL:"https://rickandmortyapi.com/api/character/",timeout:5e3,headers:{"access-control-allow-origin":"*","content-type":"application/json;charset=UTF-8"}}),J=(B.a.CancelToken.source(),B.a.isCancel,z),Y=function(){var e=Object(V.a)(K.a.mark((function e(a){var t,n,r,c,s,o,l,i,u;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.url,n=a.data,c=null,s=null,o=(r=void 0===n?{params:{}}:n).params||{},l={headers:{}},e.prev=5,"GET"!==r.requestType){e.next=13;break}return e.next=9,J.get(t,{params:o},l);case 9:i=e.sent,c={data:i.data},e.next=18;break;case 13:if("POST"!==r.requestType||!o){e.next=18;break}return e.next=16,J.post(t,o,l);case 16:u=e.sent,c={data:u.data};case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),s={data:e.t0.response};case 23:return e.abrupt("return",{response:c,error:s});case 24:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(a){return e.apply(this,arguments)}}(),$=function(){return r.a.createElement("div",{className:"spinner"})},Q=t(28),X=t(29),Z=t(14),ee=Object(Z.b)("rickcyclopedia",1,{upgrade:function(e){e.createObjectStore("pageData",{autoIncrement:!0})}}),ae=new(function(){function e(){Object(Q.a)(this,e)}return Object(X.a)(e,[{key:"get",value:function(){var e=Object(V.a)(K.a.mark((function e(a){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee;case 3:return t=e.sent,e.abrupt("return",t.transaction("pageData").objectStore("pageData").get(a));case 7:return e.prev=7,e.t0=e.catch(0),console.log("GET err==>",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(V.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee;case 3:return a=e.sent,e.abrupt("return",a.transaction("pageData").objectStore("pageData").getAll());case 7:return e.prev=7,e.t0=e.catch(0),console.log("GET_ALL err==>",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(V.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee;case 3:return a=e.sent,e.abrupt("return",a.transaction("pageData").objectStore("pageData").getAllKeys());case 7:return e.prev=7,e.t0=e.catch(0),console.log("GET_ALL err==>",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(V.a)(K.a.mark((function e(a){var t,n,r=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:null,e.prev=1,e.next=4,ee;case 4:if(n=e.sent,!t){e.next=7;break}return e.abrupt("return",n.transaction("pageData","readwrite").objectStore("pageData").put(a,t));case 7:return e.abrupt("return",n.put(a));case 10:return e.prev=10,e.t0=e.catch(1),console.log("PUT err==>",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(V.a)(K.a.mark((function e(a){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee;case 3:return t=e.sent,e.abrupt("return",t.transaction("pageData","readwrite").objectStore("pageData").delete(a));case 7:return e.prev=7,e.t0=e.catch(0),console.log("DEL err==>",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=Object(V.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee;case 3:return a=e.sent,e.abrupt("return",a.transaction("pageData","readwrite").objectStore("pageData").clear());case 7:return e.prev=7,e.t0=e.catch(0),console.log("DEL_ALL err==>",e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"deleteDB",value:function(){var e=Object(V.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)("rickcyclopedia");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),te=function(){var e=Object(n.useContext)(k),a=e.state,t=e.dispatch,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ae.get(e||"?page=1").then((function(a){a?t({type:"FETCH_DATA",payload:a}):s(e)})).catch((function(e){console.log("DATA_RETRIEVE_ERR==>",e)}))},s=function(e){Y({url:e,data:{requestType:"GET"}}).then((function(a){var n=a.response,r=a.error;if(n){var c=n.data;ae.put(c,e||"?page=1"),t({type:"FETCH_DATA",payload:c})}r&&(r.data&&t({type:"CLEAR_DATA"}))}))};return Object(n.useEffect)((function(){c()}),[]),r.a.createElement("div",{className:"main"},a.data&&Object.keys(a.data).length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null),r.a.createElement(U,{fetchData:c})):r.a.createElement($,null))},ne=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer__content-section"},r.a.createElement("span",{className:"footer__appName"},"\xa9 ","Rickcyclopedia",", "),r.a.createElement("span",null,r.a.createElement("i",{className:"fa fa-github"})," ",r.a.createElement("a",{className:"footer__git-link",href:"https://github.com/kaskaush",target:"_blank",rel:"noopener noreferrer"},"Kaushik Kasibhatla"))))},re=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o,null),r.a.createElement(te,null),r.a.createElement(ne,null))},ce=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(C,null,r.a.createElement(re,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/rickcyclopedia",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/rickcyclopedia","/service-worker.js");ce?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):se(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):se(a,e)}))}}()}},[[31,1,2]]]);
//# sourceMappingURL=main.d4cbccde.chunk.js.map